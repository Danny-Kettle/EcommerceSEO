(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(2782)}])},2782:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n(5893),a=n(1163),s=n(3299),r=n(7294);async function c(e,t){let n=await fetch("/api/auth/signup",{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-Type":"application/json"}}),o=await n.json();if(409===n.status)throw Error("Email already exists");if(!n.ok)throw Error(o.message||"Something went wrong!");return o}var i=(0,r.memo)(function(){let[e,t]=(0,r.useState)(!1),n=(0,r.useRef)(),i=(0,r.useRef)(),[l,u]=(0,r.useState)(!0),[d,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),h=(0,a.useRouter)();async function x(e){e.preventDefault();let o=n.current.value,a=i.current.value;if(l)await (0,s.signIn)("credentials",{redirect:"/",email:o,password:a});else try{await c(o,a),t(!0)}catch(e){console.error(e),m(e.message)}}return(0,r.useEffect)(()=>{let{error:e,status:t}=h.query;e&&m("Invalid email or password, please try again."),"loginToAdd"===t&&g("Please sign in to add items to your cart")},[h.query]),(0,o.jsx)("section",{className:"max-w-xl mx-auto my-7",children:e?(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("p",{className:"text-2xl font-bold mb-4",children:"You have successfully registered!"}),(0,o.jsx)("button",{onClick:()=>h.reload(),className:"bg-blue-500 text-white font-bold py-2 px-4 rounded",children:"Go to Dashboard"})]}):(0,o.jsxs)("div",{className:"py-2 px-4 sm:px-4 md:py-4 md:px-6 lg:py-6 lg:px-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4",children:l?"Login":"Sign Up"}),l&&p&&(0,o.jsx)("p",{className:"my-5 text-red-500",children:p}),(0,o.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-gray-700 font-medium",children:"Your Email"}),(0,o.jsx)("input",{type:"email",id:"email",required:!0,ref:n,className:"mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-gray-700 font-medium",children:"Your Password"}),(0,o.jsx)("input",{type:"password",id:"password",required:!0,ref:i,className:"mt-1 block w-full rounded-md bg-gray-100 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0"}),d&&(0,o.jsx)("p",{className:"mt-5 text-red-500",children:d})]}),(0,o.jsxs)("div",{className:"my-5 flex flex-col sm:flex-row justify-between items-center",children:[(0,o.jsx)("button",{id:"loginButton",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded mb-2 sm:mb-0",children:l?"Login":"Create Account"}),(0,o.jsx)("button",{type:"button",onClick:function(){u(e=>!e),m("")},className:"text-blue-500 font-bold",id:"createAcc",children:l?"No Account? Create One":"Already a user? Login"})]})]})]})})}),l=n(1301),u=n(9008),d=n.n(u),m=function(){let e=(0,a.useRouter)();return(0,r.useEffect)(()=>{(0,s.getSession)().then(t=>{t&&e.replace("/")})},[e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(d(),{children:[(0,o.jsx)("title",{children:"Echo Login | Sign In or Create an Account"}),(0,o.jsx)("meta",{name:"description",content:"Sign in to your Echo account or create a new one. Enjoy fast and easy checkout, view and track your orders, and more."}),(0,o.jsx)("meta",{name:"keywords",content:"Echo, login, sign in, create account, audio, laptops, mobiles, headphones, speakers, smartphones, tablets, computers, gaming laptops, MacBook, Dell, HP, Lenovo, Samsung, Apple, Sony, Bose, JBL, Sennheiser, Beats, Asus"}),(0,o.jsx)("meta",{name:"author",content:"Echo Inc."}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,o.jsx)("meta",{property:"og:title",content:"Echo Login | Sign In or Create an Account"}),(0,o.jsx)("meta",{property:"og:description",content:"Sign in to your Echo account or create a new one. Enjoy fast and easy checkout, view and track your orders, and more."}),(0,o.jsx)("meta",{property:"og:image",content:"/logo.png"}),(0,o.jsx)("meta",{name:"twitter:title",content:"Echo Login | Sign In or Create an Account"}),(0,o.jsx)("meta",{name:"twitter:description",content:"Sign in to your Echo account or create a new one. Enjoy fast and easy checkout, view and track your orders, and more."}),(0,o.jsx)("meta",{name:"twitter:image",content:"/logo.png"}),(0,o.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,o.jsx)(l.Z,{children:(0,o.jsx)(i,{})})]})}},9008:function(e,t,n){e.exports=n(2636)}},function(e){e.O(0,[424,301,774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);