(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{4320:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[category]/[productId]",function(){return s(5273)}])},5273:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var c=s(5893),l=s(1301),n=s(1163),a=s(3299),i=s(9633),r=s(2134),o=s(9008),d=s.n(o),m=s(7294);function x(){let e=(0,n.useRouter)(),{cartItems:t,addToCart:s,incrementItem:o}=(0,i.jD)(),{products:x}=(0,r.rn)(),{productId:p}=e.query,[u,h]=(0,m.useState)([]),[g,f]=(0,m.useState)(!0),[j,w]=(0,m.useState)(null),{data:y}=(0,a.useSession)(),[N,b]=(0,m.useState)(!1);(0,m.useEffect)(()=>{let e=()=>{b(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let _=x.find(e=>e._id===p);(0,m.useEffect)(()=>{if(j){let e=setTimeout(()=>{w(null)},1e4);return()=>clearTimeout(e)}},[j]),(0,m.useEffect)(()=>{if(_){let e=x.filter(e=>(e.category===_.category||e.brand===_.brand)&&e._id!==_._id);h(e),f(!1)}},[_,x]);let v=()=>{if(t){let e=t.find(e=>e._id===p);e?o(e._id):s({_id:_._id,name:_.name,price:_.price,description:"".concat(_.description.slice(0,150),"..."),picture:_.picture,stock:_.stock})}else s({_id:_._id,name:_.name,price:_.price,description:"".concat(_.description.slice(0,150),"..."),picture:_.picture,stock:_.stock});w({name:_.name,price:_.price,picture:_.picture})};return g?(0,c.jsx)("div",{children:"Loading..."}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(d(),{children:[(0,c.jsxs)("title",{children:["Echo | ",_?_.category:"Product"," |\xa0",_?_.brand:"Product"," |\xa0",_?_.name:"Product"]}),(0,c.jsx)("meta",{name:"description",content:_?"Shop the ".concat(_.brand," ").concat(_.category," ").concat(_.name," on Echo! ").concat(_.description):"Shop the latest products on Echo!"}),(0,c.jsx)("meta",{property:"og:title",content:_?"".concat(_.brand," ").concat(_.category," ").concat(_.name):"Echo"}),(0,c.jsx)("meta",{property:"og:description",content:_?_.description:"Shop the latest products on Echo!"}),(0,c.jsx)("meta",{property:"og:image",content:_?_.imageUrl:"https://www.example.com/image.jpg"}),(0,c.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,c.jsx)("meta",{name:"twitter:title",content:_?"".concat(_.brand," ").concat(_.category," ").concat(_.name):"Echo"}),(0,c.jsx)("meta",{name:"twitter:description",content:_?_.description:"Shop the latest products on Echo!"}),(0,c.jsx)("meta",{name:"twitter:image",content:_?_.imageUrl:"https://www.example.com/image.jpg"})]}),(0,c.jsx)(l.Z,{children:g?(0,c.jsx)("div",{children:"Loading..."}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-col w-11/12 lg:w-full mx-auto mt-20 items-center",children:[j&&(0,c.jsxs)("div",{className:"fixed top-10 left-10 z-50 h-24 bg-gray-100 rounded shadow-xl  px-6 gap-4 flex justify-center items-center p-2",children:[(0,c.jsx)("img",{src:j.picture,alt:j.name,className:"h-full mr-2"}),(0,c.jsxs)("div",{className:"text-gray-900",children:[(0,c.jsx)("p",{className:"font-bold",children:j.name}),(0,c.jsxs)("p",{children:["\xa3",j.price]}),(0,c.jsx)("p",{className:"text-xs text-green-600",children:"Has been added to the cart"})]})]}),(0,c.jsxs)("div",{className:"flex flex-col lg:flex-row gap-10 justify-between lg:gap-0 lg:justify-evenly max-w-screen-xl",children:[(0,c.jsx)("div",{className:"flex flex-col items-center mx-auto w-2/3 lg:w-1/3",children:(0,c.jsx)("img",{src:_.picture,alt:_.name,className:"w-full rounded-lg mb-4 max-w-sm"})}),(0,c.jsxs)("div",{className:"flex flex-col bg-gray-100 items-start w-full lg:w-1/2 pt-8 lg:py-8",children:[(0,c.jsx)("h1",{className:"text-xl lg:text-2xl pl-8 font-bold mb-4",children:_.name}),(0,c.jsx)("h2",{className:"text-md lg:text-lg pl-8 font-bold",children:"Product Specification"}),(0,c.jsx)("ul",{className:"my-2 pl-8 ml-10 lg:ml-10 list-disc",children:_.specs.map((e,t)=>(0,c.jsx)("li",{children:(0,c.jsx)("p",{className:"ml-3 lg:ml-5 text-sm lg:text-md leading-4 lg:leading-8",children:(0,c.jsx)("span",{children:e})})},t))}),(0,c.jsxs)("div",{className:"flex lg:my-5 mt-5  bg-white p-5 flex-row w-full items-center",children:[(0,c.jsxs)("p",{className:"text-xl font-bold",children:["\xa3",Number(_.price).toFixed(2)]}),_.stock>=1?(0,c.jsx)("button",{onClick:y?v:function(){e.push({pathname:"/login",query:{status:"loginToAdd"}})},className:"add-cart-btn bg-emerald-400 text-white px-4 ml-auto py-2 rounded-lg",children:"+"}):(0,c.jsx)("p",{className:"text-red-500 ml-auto font-bold ",children:"Out of stock"})]}),!N&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"pl-8 text-lg font-bold",children:"Description"}),(0,c.jsx)("p",{className:"text-md px-8 my-2 text-justify leading-6",children:_.description})]})]})]}),N&&(0,c.jsxs)("div",{className:"bg-gray-100 py-8",children:[(0,c.jsx)("h2",{className:" pl-8 text-md font-bold",children:"Description"}),(0,c.jsx)("p",{className:"text-sm px-8 my-2 text-justify leading-4",children:_.description})]})]}),(0,c.jsxs)("div",{className:"flex flex-col w-11/12 mx-auto max-w-screen-xl py-5 mt-20",children:[(0,c.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Related Products"}),(0,c.jsx)("div",{className:"flex flex-wrap justify-evenly",children:u.length>0&&u.slice(0,4).map(t=>(0,c.jsx)("div",{onClick:()=>e.push({pathname:"/products/[category]/[productId]",query:{category:t.category,productId:t._id},as:"/products/".concat(t.category,"/").concat(t._id)}),className:"w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 p-2 cursor-pointer",children:(0,c.jsxs)("div",{className:"rounded-lg flex flex-col bg-gray-100 p-4",children:[(0,c.jsx)("img",{src:t.picture,alt:t.name,className:"w-full h-40 object-contain rounded-lg"}),(0,c.jsxs)("div",{className:"flex flex-col pt-4",children:[(0,c.jsx)("p",{className:"font-bold",children:t.name}),(0,c.jsxs)("p",{className:"self-end",children:["\xa3",Number(t.price).toFixed(2)]})]})]})},t._id))})]})]})})]})}},9008:function(e,t,s){e.exports=s(2636)}},function(e){e.O(0,[424,301,774,888,179],function(){return e(e.s=4320)}),_N_E=e.O()}]);